name: Example City Pipeline
author: Hippodamus
target_directory: "/tmp"
rules:
  - target: cities.csv
    updates_target: true
    prerequisites: []
    recipe:
      - "wget -O /tmp/cities.csv https://people.sc.fsu.edu/~jburkardt/data/csv/cities.csv"
  - target: calculate_count.md
    updates_target: true
    prequisites: ["cities.csv"]
    recipe:
      - "sqlite3 :memory: -cmd '.mode csv' -cmd '.import /tmp/cities.csv cities' -cmd '.mode markdown' 'SELECT COUNT(*) FROM cities' > /tmp/calculate_count.md"
  - target: preview.md
    updates_target: true
    prequisites: ["cities.csv"]
    recipe:
      - "sqlite3 :memory: -cmd '.mode csv' -cmd '.import /tmp/cities.csv cities' -cmd '.mode markdown' 'SELECT * FROM cities LIMIT 5' > /tmp/preview.md"
  - target: preview.md
    prequisites: ["calculate_count.md", "preview.md"]
    recipe:
      - cat /tmp/calculate_count.md
      - cat /tmp/preview.md
    

